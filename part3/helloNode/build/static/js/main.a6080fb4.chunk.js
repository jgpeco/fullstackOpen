(this["webpackJsonpexample-a"]=this["webpackJsonpexample-a"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),o=n(17),i=n.n(o),u=n(3),s=n.n(u),l=n(5),j=n(8),b=n(4),d=function(e){var t=e.note,n=e.toggleImportance,c=t.important?"make not important":"make important";return Object(r.jsxs)("li",{className:"note",children:[t.content,Object(r.jsx)("button",{onClick:n,children:c})]})},f=function(e){var t=e.message;return null===t?null:Object(r.jsx)("div",{className:"error",children:t})},p=a.a.forwardRef((function(e,t){var n=Object(c.useState)(!1),a=Object(b.a)(n,2),o=a[0],i=a[1],u={display:o?"none":""},s={display:o?"":"none"},l=function(){i(!o)};return Object(c.useImperativeHandle)(t,(function(){return{toggleVisibility:l}})),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{style:u,children:Object(r.jsx)("button",{onClick:l,children:e.buttonLabel})}),Object(r.jsxs)("div",{style:s,className:"togglableContent",children:[e.children,Object(r.jsx)("button",{onClick:l,children:"Cancel"})]})]})}));p.displayName="Toggable";var O=p,h=function(e){var t=e.createNote,n=Object(c.useState)(""),a=Object(b.a)(n,2),o=a[0],i=a[1];return Object(r.jsxs)("div",{className:"formDiv",children:[Object(r.jsx)("h2",{children:"Create a new note"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:o,important:!1}),i("")},children:[Object(r.jsx)("input",{type:"text",value:o,onChange:function(e){i(e.target.value)}}),Object(r.jsx)("button",{type:"submit",children:"Save"})]})]})},m=function(e){var t=e.handleLogin,n=Object(c.useState)(""),a=Object(b.a)(n,2),o=a[0],i=a[1],u=Object(c.useState)(""),j=Object(b.a)(u,2),d=j[0],f=j[1],p=function(){var e=Object(l.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t({username:o,password:d});case 3:i(""),f("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Login"}),Object(r.jsxs)("form",{onSubmit:p,children:[Object(r.jsxs)("div",{children:["Username: ",Object(r.jsx)("input",{type:"text",id:"username",value:o,onChange:function(e){var t=e.target;return i(t.value)}})]}),Object(r.jsxs)("div",{children:["Password: ",Object(r.jsx)("input",{type:"password",id:"password",value:d,onChange:function(e){var t=e.target;return f(t.value)}})]}),Object(r.jsx)("button",{id:"login-button",type:"submit",children:"Login"})]})]})},v=n(6),x=n.n(v),g="/api/notes",w=null,y={getAll:function(){return x.a.get(g).then((function(e){return e.data}))},create:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:w}},e.next=3,x.a.post(g,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return x.a.put("".concat(g,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){w="bearer ".concat(e)}},k={login:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(){return Object(r.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:"1.2rem",display:"flex",justifyContent:"center",margin:"1.5rem"},children:[Object(r.jsx)("br",{}),Object(r.jsx)("em",{children:"Note app, Department of Pecosville"})]})},N=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!0),i=Object(b.a)(o,2),u=i[0],p=i[1],v=Object(c.useState)(null),x=Object(b.a)(v,2),g=x[0],w=x[1],N=Object(c.useState)(null),C=Object(b.a)(N,2),L=C[0],I=C[1];Object(c.useEffect)((function(){y.getAll().then((function(e){a(e)}))}),[]),Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);I(t),y.setToken(t.token)}}),[]);var T=Object(c.useRef)(),D=function(e){T.current.toggleVisibility(),y.create(e).then((function(e){a(n.concat(e))}))},J=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.login(t);case 3:n=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),y.setToken(n.token),I(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),w("Wrong Credentials"),setTimeout((function(){w(null)}),4e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),U=u?n:n.filter((function(e){return e.important}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Notes"}),Object(r.jsx)(f,{message:g}),null===L?Object(r.jsx)(O,{buttonLabel:"Login",children:Object(r.jsx)(m,{handleLogin:J})}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[L.name," logged"]}),Object(r.jsx)(O,{buttonLabel:"New Note",ref:T,children:Object(r.jsx)(h,{createNote:D})}),Object(r.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedNoteappUser"),y.setToken(null),I(null)},children:"Logout"})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("button",{onClick:function(){return p(!u)},children:["show ",u?"important":"all"]})}),Object(r.jsx)("ul",{children:U.map((function(e,t){return Object(r.jsx)(d,{note:e,toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),r=Object(j.a)(Object(j.a)({},t),{},{important:!t.important});y.update(e,r).then((function(t){a(n.map((function(n){return n.id!==e?n:t})))})).catch((function(){w("Note '".concat(t.content,"' was already removed from server")),setTimeout((function(){w(null)}),5e3)}))}(e.id)}},t)}))}),Object(r.jsx)(S,{})]})};n(41);i.a.render(Object(r.jsx)(N,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a6080fb4.chunk.js.map