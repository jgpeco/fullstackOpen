(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(15),c=n.n(u),o=n(1),s=n.n(o),i=n(2),l=n(3),p=function(e){var t=e.message,n=e.messageType;return t?a.a.createElement("div",{className:"notification-".concat(n)},t):null},f=function(e){var t=e.blog,n=e.updateBlog,u=e.deleteBlog,c=e.loggedUser,o=Object(r.useState)(!1),p=Object(l.a)(o,2),f=p[0],m=p[1],d=Object(r.useState)(!1),v=Object(l.a)(d,2),b=v[0],g=v[1];Object(r.useEffect)((function(){c.username&&t.user.username&&c.username===t.user.username&&g(!0)}),[]);var h={display:f?"":"none"},E=function(){var e=Object(i.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user:t.user.id,title:t.title,author:t.author,url:t.url,likes:t.likes+1,id:t.id},e.next=3,n(r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this blog? This action is irreversible")){e.next=4;break}return n={id:t.id,user:t.user.id},e.next=4,u(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",{style:{marginBottom:"0.5rem",paddingTop:"0.5rem",border:"1px solid black"},className:"blogItem"},a.a.createElement("div",{className:"blogItem-initialInfo"},t.title," ",a.a.createElement("button",{onClick:function(){return m(!f)}},"View Details")),a.a.createElement("div",{style:h,className:"blogItem-detailsInfo"},a.a.createElement("p",null,"Author: ",t.author),a.a.createElement("p",null,"URL: ",t.url),t.user?a.a.createElement("p",null,"Likes: ",t.likes," ",a.a.createElement("button",{onClick:E},"like")):null,b&&a.a.createElement("p",null,a.a.createElement("button",{onClick:w},"Remove"))))},m=function(e){var t=e.createBlog,n=Object(r.useState)(""),u=Object(l.a)(n,2),c=u[0],o=u[1],p=Object(r.useState)(""),f=Object(l.a)(p,2),m=f[0],d=f[1],v=Object(r.useState)(""),b=Object(l.a)(v,2),g=b[0],h=b[1],E=function(){var e=Object(i.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={title:c,author:m,url:g},e.next=4,t(r);case 4:o(""),d(""),h("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:E,className:"blog-form"},a.a.createElement("div",null,"title: ",a.a.createElement("input",{type:"text",id:"input-title",value:c,name:"blogTitle",onChange:function(e){var t=e.target;return o(t.value)}})),a.a.createElement("div",null,"author: ",a.a.createElement("input",{type:"text",id:"input-author",value:m,name:"blogAuthor",onChange:function(e){var t=e.target;return d(t.value)}})),a.a.createElement("div",null,"url: ",a.a.createElement("input",{type:"text",id:"input-url",value:g,onChange:function(e){var t=e.target;return h(t.value)}})),a.a.createElement("button",{type:"submit"},"Create New Blog"))},d=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),u=n[0],c=n[1],o=function(){return c(!u)},s={display:u?"none":""},i={display:u?"":"none"};return a.a.createElement("div",null,a.a.createElement("div",{style:s},a.a.createElement("button",{onClick:o},e.buttonName)),a.a.createElement("div",{style:i},e.children,a.a.createElement("button",{onClick:o},"Go Back")))},v=n(5),b=n.n(v),g=null,h={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){g="Bearer ".concat(e)},create:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,b.a.post("/api/blogs",t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat("/api/blogs","/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteItem:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,b.a.delete("".concat("/api/blogs","/").concat(t.id),n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],c=Object(r.useState)(""),o=Object(l.a)(c,2),v=o[0],b=o[1],g=Object(r.useState)(""),w=Object(l.a)(g,2),k=w[0],O=w[1],j=Object(r.useState)(null),x=Object(l.a)(j,2),y=x[0],B=x[1],S=Object(r.useState)(""),C=Object(l.a)(S,2),I=C[0],N=C[1],T=Object(r.useState)(""),U=Object(l.a)(T,2),A=U[0],J=U[1];Object(r.useEffect)(Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:t=e.sent,u(t.sort((function(e,t){return t.likes-e.likes})));case 4:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("loggedBloglistUser"));e&&(B(e),h.setToken(e.token))}),[]);var L=function(){b(""),O("")},z=function(e,t){N(e),J(t),setTimeout((function(){N(""),J("")}),4e3)},D=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.login({username:v,password:k});case 4:n=e.sent,window.localStorage.setItem("loggedBloglistUser",JSON.stringify(n)),h.setToken(n.token),B(n),L(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),z("Wrong Credentials","error"),L();case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.create(t);case 3:r=e.sent,u(n.concat(r)),z("New Blog ".concat(r.title," added"),"success"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),z("Invalid or missing information on form","error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.update(t);case 3:r=e.sent,u(n.map((function(e){return e.id===r.id?r:e}))),z("Blog ".concat(r.title," updated"),"success"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),z("Invalid action","error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.deleteItem(t);case 3:u(n.filter((function(e){return e.id!==t.id}))),z("Blog Removed","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),z("You don't have authorization for this action","error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();if(null===y)return a.a.createElement("form",{onSubmit:D},a.a.createElement(p,{message:I,messageType:A}),a.a.createElement("div",null,"Username:",a.a.createElement("input",{type:"text",value:v,name:"username",onChange:function(e){return b(e.target.value)}})),a.a.createElement("div",null,"Password:",a.a.createElement("input",{type:"text",value:k,name:"password",onChange:function(e){return O(e.target.value)}})),a.a.createElement("button",{type:"submit"},"Login"));var V=y||!1;return a.a.createElement("div",null,a.a.createElement("h2",null,"blogs"),a.a.createElement(p,{message:I,messageType:A}),a.a.createElement("p",null,y.name," is logged ",a.a.createElement("button",{onClick:function(){window.localStorage.removeItem("loggedBloglistUser"),B(null),h.setToken(null),z("User logged out","success"),L()}},"Logout")),a.a.createElement("h2",null,"Create Blog"),a.a.createElement(d,{buttonName:"Create New Blog"},a.a.createElement(m,{createBlog:R})),n.map((function(e){return a.a.createElement(f,{key:e.id,blog:e,updateBlog:G,deleteBlog:P,loggedUser:V})})))};n(39);c.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.9eafc5c4.chunk.js.map